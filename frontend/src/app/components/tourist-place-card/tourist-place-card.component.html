<div
  class="rounded-xl overflow-hidden transition-all duration-300 w-[300px] h-[420px] flex flex-col cursor-pointer group"
  (click)="goToDetails()">
  <div class="relative h-64 overflow-hidden">
    <img [src]="imageUrl" [alt]="place.name"
      class="w-full h-full object-cover group-hover:scale-100 transition-transform duration-500" />
    <div class="absolute inset-0  group-hover:bg-white/20 transition-all duration-300"></div>
  </div>

  <div class="px-2 py-3 flex-1 flex flex-col">
    <h3 class="text-lg font-bold text-gray-800 truncate mb-2">{{ place.name }}</h3>

    <div class="flex items-center mb-2" *ngIf="hasRating; else noRating">
      <div class="flex mr-2">

        <span class="text-amber-700 font-bold ">{{ getFormattedRating() }}</span>

        <ng-container *ngFor="let star of getRatingStars(); let i = index">
          <div class="relative h-5 w-5">
            <svg *ngIf="star < 1" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 absolute text-gray-300 fill-current"
              viewBox="0 0 20 20">
              <path
                d="M9.049.927L11.317 6.6h6.163L12.94 10.6l2.268 5.673-5.159-3.17-5.16 3.17L7.06 10.6 2.52 6.6h6.163z" />
            </svg>

            <div *ngIf="star > 0 && star < 1" class="absolute overflow-hidden" [style.width.%]="star * 100">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-amber-500 fill-current" viewBox="0 0 20 20">
                <path
                  d="M9.049.927L11.317 6.6h6.163L12.94 10.6l2.268 5.673-5.159-3.17-5.16 3.17L7.06 10.6 2.52 6.6h6.163z" />
              </svg>
            </div>

            <svg *ngIf="star >= 1" xmlns="http://www.w3.org/2000/svg"
              class="h-5 w-5 absolute text-amber-500 fill-current" viewBox="0 0 20 20">
              <path
                d="M9.049.927L11.317 6.6h6.163L12.94 10.6l2.268 5.673-5.159-3.17-5.16 3.17L7.06 10.6 2.52 6.6h6.163z" />
            </svg>
          </div>
        </ng-container>

        <span class="text-amber-700 text-sm">({{ likes }})</span>

      </div>
    </div>

    <ng-template #noRating>
      <div class="text-sm text-gray-500 mb-2">No rating yet</div>
    </ng-template>

    <div class="mb-2 flex flex-wrap gap-1">
      <span *ngFor="let category of categories" class="text-xs px-2 py-1 bg-amber-100 text-amber-800 rounded-full">
        {{ category }}
      </span>
    </div>

    <div class="mt-auto flex items-center text-sm text-gray-600">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1 text-amber-600" fill="none" viewBox="0 0 24 24"
        stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
          d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
      </svg>
      <span class="truncate">{{ location }}</span>
    </div>

    <div class="mt-3 w-full h-1 bg-amber-500 rounded-full group-hover:bg-amber-600 transition-colors"></div>
  </div>
</div>